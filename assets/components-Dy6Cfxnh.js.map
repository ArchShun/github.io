{"version":3,"file":"components-Dy6Cfxnh.js","sources":["../../src/config/zh.js","../../src/config/en.js","../../src/config/index.js","../../src/components/ColorPicker.vue","../../src/utils/async_utils.ts","../../src/stores/main.ts","../../src/components/RichTextToolbar.vue","../../src/components/SvgContextMenu.vue","../../src/api/settingsApi.ts","../../src/api/index.ts","../../src/stores/settings.ts","../../src/stores/state.ts","../../src/api/axiosIns.ts","../../src/api/githubApi.ts","../../src/components/MenuToolbar.vue"],"sourcesContent":["// 字体列表\r\nexport const fontFamilyList = [\r\n  {\r\n    name: '宋体',\r\n    value: '宋体, SimSun, Songti SC'\r\n  },\r\n  {\r\n    name: '微软雅黑',\r\n    value: '微软雅黑, Microsoft YaHei'\r\n  },\r\n  {\r\n    name: '楷体',\r\n    value: '楷体, 楷体_GB2312, SimKai, STKaiti'\r\n  },\r\n  {\r\n    name: '黑体',\r\n    value: '黑体, SimHei, Heiti SC'\r\n  },\r\n  {\r\n    name: '隶书',\r\n    value: '隶书, SimLi'\r\n  },\r\n  {\r\n    name: 'Andale Mono',\r\n    value: 'andale mono'\r\n  },\r\n  {\r\n    name: 'Arial',\r\n    value: 'arial, helvetica, sans-serif'\r\n  },\r\n  {\r\n    name: 'arialBlack',\r\n    value: 'arial black, avant garde'\r\n  },\r\n  {\r\n    name: 'Comic Sans Ms',\r\n    value: 'comic sans ms'\r\n  },\r\n  {\r\n    name: 'Impact',\r\n    value: 'impact, chicago'\r\n  },\r\n  {\r\n    name: 'Times New Roman',\r\n    value: 'times new roman'\r\n  },\r\n  {\r\n    name: 'Sans-Serif',\r\n    value: 'sans-serif'\r\n  },\r\n  {\r\n    name: 'serif',\r\n    value: 'serif'\r\n  }\r\n]\r\n\r\n// 字号\r\nexport const fontSizeList = [10, 12, 16, 18, 24, 32, 48]\r\n\r\n// 行高\r\nexport const lineHeightList = [1, 1.5, 2, 2.5, 3]\r\n\r\n// 颜色\r\nexport const colorList = [\r\n  '#4D4D4D',\r\n  '#999999',\r\n  '#FFFFFF',\r\n  '#F44E3B',\r\n  '#FE9200',\r\n  '#FCDC00',\r\n  '#DBDF00',\r\n  '#A4DD00',\r\n  '#68CCCA',\r\n  '#73D8FF',\r\n  '#AEA1FF',\r\n  '#FDA1FF',\r\n  '#333333',\r\n  '#808080',\r\n  '#cccccc',\r\n  '#D33115',\r\n  '#E27300',\r\n  '#FCC400',\r\n  '#B0BC00',\r\n  '#68BC00',\r\n  '#16A5A5',\r\n  '#009CE0',\r\n  '#7B64FF',\r\n  '#FA28FF',\r\n  '#000000',\r\n  '#666666',\r\n  '#B3B3B3',\r\n  '#9F0500',\r\n  '#C45100',\r\n  '#FB9E00',\r\n  '#808900',\r\n  '#194D33',\r\n  '#0C797D',\r\n  '#0062B1',\r\n  '#653294',\r\n  // '#AB149E',\r\n  'transparent'\r\n]\r\n\r\n// 边框宽度\r\nexport const borderWidthList = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\r\n\r\n// 边框样式\r\nexport const borderDasharrayList = [\r\n  {\r\n    name: '实线',\r\n    value: 'none'\r\n  },\r\n  {\r\n    name: '虚线1',\r\n    value: '5,5'\r\n  },\r\n  {\r\n    name: '虚线2',\r\n    value: '10,10'\r\n  },\r\n  {\r\n    name: '虚线3',\r\n    value: '20,10,5,5,5,10'\r\n  },\r\n  {\r\n    name: '虚线4',\r\n    value: '5, 5, 1, 5'\r\n  },\r\n  {\r\n    name: '虚线5',\r\n    value: '15, 10, 5, 10, 15'\r\n  },\r\n  {\r\n    name: '虚线6',\r\n    value: '1, 5'\r\n  },\r\n  {\r\n    name: '虚线7',\r\n    value: '6, 4'\r\n  }\r\n]\r\n\r\n// 圆角\r\nexport const borderRadiusList = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\r\n\r\n// 线宽\r\nexport const lineWidthList = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\r\n\r\nexport const lineStyleMap = {\r\n  straight: `<svg width=\"60\" height=\"26\"><path d=\"M18,14L30,14L30,5L42,5\" fill=\"none\" stroke=\"#000\" stroke-width=\"2\"></path><path d=\"M18,14L30,14L30,23L42,23\" fill=\"none\" stroke=\"#000\" stroke-width=\"2\"></path></svg>`,\r\n  curve: `<svg width=\"60\" height=\"26\"><path d=\"M18,14L30,14A12,-9 0 0 1 42,5\" fill=\"none\" stroke=\"#000\" stroke-width=\"2\"></path><path d=\"M18,14L30,14A12,9 0 0 0 42,23\" fill=\"none\" stroke=\"#000\" stroke-width=\"2\"></path></svg>`,\r\n  direct: `<svg width=\"60\" height=\"26\"><path d=\"M18,14L30,14L42,5\" fill=\"none\" stroke=\"#000\" stroke-width=\"2\"></path><path d=\"M18,14L30,14L42,23\" fill=\"none\" stroke=\"#000\" stroke-width=\"2\"></path></svg>`\r\n}\r\n\r\n// 连线风格\r\nexport const lineStyleList = [\r\n  {\r\n    name: '直线',\r\n    value: 'straight'\r\n  },\r\n  {\r\n    name: '曲线',\r\n    value: 'curve'\r\n  },\r\n  {\r\n    name: '直连',\r\n    value: 'direct'\r\n  }\r\n]\r\n\r\n// 曲线风格中，根节点样式是否和其他节点保持一致\r\nexport const rootLineKeepSameInCurveList = [\r\n  {\r\n    name: '括号',\r\n    value: false\r\n  },\r\n  {\r\n    name: '大括号',\r\n    value: true\r\n  }\r\n]\r\n\r\n// 图片重复方式\r\nexport const backgroundRepeatList = [\r\n  {\r\n    name: '不重复',\r\n    value: 'no-repeat'\r\n  },\r\n  {\r\n    name: '重复',\r\n    value: 'repeat'\r\n  },\r\n  {\r\n    name: '水平方向重复',\r\n    value: 'repeat-x'\r\n  },\r\n  {\r\n    name: '垂直方向重复',\r\n    value: 'repeat-y'\r\n  }\r\n]\r\n\r\n// 背景图片定位\r\nexport const backgroundPositionList = [\r\n  {\r\n    name: '默认',\r\n    value: '0% 0%'\r\n  },\r\n  {\r\n    name: '左上',\r\n    value: 'left top'\r\n  },\r\n  {\r\n    name: '左中',\r\n    value: 'left center'\r\n  },\r\n  {\r\n    name: '左下',\r\n    value: 'left bottom'\r\n  },\r\n  {\r\n    name: '右上',\r\n    value: 'right top'\r\n  },\r\n  {\r\n    name: '右中',\r\n    value: 'right center'\r\n  },\r\n  {\r\n    name: '右下',\r\n    value: 'right bottom'\r\n  },\r\n  {\r\n    name: '中上',\r\n    value: 'center top'\r\n  },\r\n  {\r\n    name: '居中',\r\n    value: 'center center'\r\n  },\r\n  {\r\n    name: '中下',\r\n    value: 'center bottom'\r\n  }\r\n]\r\n\r\n// 背景图片大小\r\nexport const backgroundSizeList = [\r\n  {\r\n    name: '自动',\r\n    value: 'auto'\r\n  },\r\n  {\r\n    name: '覆盖',\r\n    value: 'cover'\r\n  },\r\n  {\r\n    name: '保持',\r\n    value: 'contain'\r\n  }\r\n]\r\n\r\n// 数据存储\r\nexport const store = {\r\n  sidebarZIndex: 1 //侧边栏zIndex\r\n}\r\nconst isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0\r\nconst ctrl = isMac ? '⌘' : 'Ctrl'\r\nconst enter = isMac ? 'Return' : 'Enter'\r\nconst macFn = isMac ? 'fn + ' : ''\r\n\r\n// 快捷键列表\r\nexport const shortcutKeyList = [\r\n  {\r\n    type: '节点操作',\r\n    list: [\r\n      {\r\n        icon: 'icontianjiazijiedian',\r\n        name: '插入下级节点',\r\n        value: 'Tab | Insert'\r\n      },\r\n      {\r\n        icon: 'iconjiedian',\r\n        name: '插入同级节点',\r\n        value: enter\r\n      },\r\n      {\r\n        icon: 'icondodeparent',\r\n        name: '插入父节点',\r\n        value: 'Shift + Tab'\r\n      },\r\n      {\r\n        icon: 'iconshangyi',\r\n        name: '上移节点',\r\n        value: `${ctrl} + ↑`\r\n      },\r\n      {\r\n        icon: 'iconxiayi',\r\n        name: '下移节点',\r\n        value: `${ctrl} + ↓`\r\n      },\r\n      {\r\n        icon: 'icongaikuozonglan',\r\n        name: '插入概要',\r\n        value: `${ctrl} + G`\r\n      },\r\n      {\r\n        icon: 'iconzhankai',\r\n        name: '展开/收起节点',\r\n        value: '/'\r\n      },\r\n      {\r\n        icon: 'iconshanchu',\r\n        name: '删除节点',\r\n        value: 'Delete | Backspace'\r\n      },\r\n      {\r\n        icon: 'iconshanchu',\r\n        name: '仅删除当前节点',\r\n        value: 'Shift + Backspace'\r\n      },\r\n      {\r\n        icon: 'iconfuzhi',\r\n        name: '复制节点',\r\n        value: `${ctrl} + C`\r\n      },\r\n      {\r\n        icon: 'iconjianqie',\r\n        name: '剪切节点',\r\n        value: `${ctrl} + X`\r\n      },\r\n      {\r\n        icon: 'iconniantie',\r\n        name: '粘贴节点',\r\n        value: `${ctrl} + V`\r\n      },\r\n      {\r\n        icon: 'iconbianji',\r\n        name: '编辑节点',\r\n        value: macFn + 'F2'\r\n      },\r\n      {\r\n        icon: 'iconhuanhang',\r\n        name: '文本换行',\r\n        value: `Shift + ${enter}`\r\n      },\r\n      {\r\n        icon: 'iconhoutui-shi',\r\n        name: '回退',\r\n        value: `${ctrl} + Z`\r\n      },\r\n      {\r\n        icon: 'iconqianjin1',\r\n        name: '前进',\r\n        value: `${ctrl} + Y`\r\n      },\r\n      {\r\n        icon: 'iconquanxuan',\r\n        name: '全选',\r\n        value: `${ctrl} + A`\r\n      },\r\n      {\r\n        icon: 'iconquanxuan',\r\n        name: '多选',\r\n        value: `右键 / ${ctrl} + 左键`\r\n      },\r\n      {\r\n        icon: 'iconzhengli',\r\n        name: '一键整理布局',\r\n        value: `${ctrl} + L`\r\n      },\r\n      {\r\n        icon: 'iconsousuo',\r\n        name: '搜索和替换',\r\n        value: `${ctrl} + F`\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    type: '画布操作',\r\n    list: [\r\n      {\r\n        icon: 'iconfangda',\r\n        name: '放大',\r\n        value: `${ctrl} + +`\r\n      },\r\n      {\r\n        icon: 'iconsuoxiao',\r\n        name: '缩小',\r\n        value: `${ctrl} + -`\r\n      },\r\n      {\r\n        icon: 'iconfangda',\r\n        name: '放大/缩小',\r\n        value: `${ctrl} + 鼠标滚动`\r\n      },\r\n      {\r\n        icon: 'icondingwei',\r\n        name: '回到根节点',\r\n        value: `${ctrl} + ${enter}`\r\n      },\r\n      {\r\n        icon: 'iconquanping1',\r\n        name: '适应画布',\r\n        value: `${ctrl} + i`\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    type: '大纲操作',\r\n    list: [\r\n      {\r\n        icon: 'iconhuanhang',\r\n        name: '文本换行',\r\n        value: `Shift + ${enter}`\r\n      },\r\n      {\r\n        icon: 'iconshanchu',\r\n        name: '删除节点',\r\n        value: 'Delete'\r\n      },\r\n      {\r\n        icon: 'icontianjiazijiedian',\r\n        name: '插入下级节点',\r\n        value: 'Tab'\r\n      },\r\n      {\r\n        icon: 'iconjiedian',\r\n        name: '插入同级节点',\r\n        value: enter\r\n      },\r\n      {\r\n        icon: 'icondodeparent',\r\n        name: '上移一个层级',\r\n        value: 'Shift + Tab'\r\n      }\r\n    ]\r\n  }\r\n]\r\n\r\nexport const shapeListMap = {\r\n  rectangle: 'M 4 12 L 4 3 L 56 3 L 56 21 L 4 21 L 4 12 Z',\r\n  diamond: 'M 4 12 L 30 3 L 56 12 L 30 21 L 4 12 Z',\r\n  parallelogram: 'M 10 3 L 56 3 L 50 21 L 4 21 L 10 3 Z',\r\n  roundedRectangle:\r\n    'M 13 3 L 47 3 A 9 9 0, 0 1 47 21 L 13 21 A 9 9 0, 0 1 13 3 Z',\r\n  octagonalRectangle:\r\n    'M 4 12 L 4 9 L 10 3 L 50 3 L 56 9 L 56 15 L 50 21 L 10 21 L 4 15 L 4 12 Z',\r\n  outerTriangularRectangle:\r\n    'M 4 12 L 10 3 L 50 3 L 56 12 L 50 21 L 10 21 L 4 12 Z',\r\n  innerTriangularRectangle:\r\n    'M 10 12 L 4 3 L 56 3 L 50 12 L 56 21 L 4 21 L 10 12 Z',\r\n  ellipse: 'M 4 12 A 26 9 0, 1, 0 30 3 A 26 9 0, 0, 0 4 12 Z',\r\n  circle: 'M 21 12 A 9 9 0, 1, 0 30 3 A 9 9 0, 0, 0 21 12 Z'\r\n}\r\n\r\n// 形状列表\r\nexport const shapeList = [\r\n  {\r\n    name: '矩形',\r\n    value: 'rectangle'\r\n  },\r\n  {\r\n    name: '菱形',\r\n    value: 'diamond'\r\n  },\r\n  {\r\n    name: '平行四边形',\r\n    value: 'parallelogram'\r\n  },\r\n  {\r\n    name: '圆角矩形',\r\n    value: 'roundedRectangle'\r\n  },\r\n  {\r\n    name: '八角矩形',\r\n    value: 'octagonalRectangle'\r\n  },\r\n  {\r\n    name: '外三角矩形',\r\n    value: 'outerTriangularRectangle'\r\n  },\r\n  {\r\n    name: '内三角矩形',\r\n    value: 'innerTriangularRectangle'\r\n  },\r\n  {\r\n    name: '椭圆',\r\n    value: 'ellipse'\r\n  },\r\n  {\r\n    name: '圆',\r\n    value: 'circle'\r\n  }\r\n]\r\n\r\n// 多语言列表\r\nexport const langList = [\r\n  {\r\n    value: 'zh',\r\n    name: '简体中文'\r\n  },\r\n  {\r\n    value: 'en',\r\n    name: 'English'\r\n  }\r\n]\r\n\r\n// 侧边栏列表\r\nexport const sidebarTriggerList = [\r\n  {\r\n    name: '节点样式',\r\n    value: 'nodeStyle',\r\n    icon: 'iconzhuti'\r\n  },\r\n  {\r\n    name: '基础样式',\r\n    value: 'baseStyle',\r\n    icon: 'iconyangshi'\r\n  },\r\n  {\r\n    name: '主题',\r\n    value: 'theme',\r\n    icon: 'iconjingzi'\r\n  },\r\n  {\r\n    name: '结构',\r\n    value: 'structure',\r\n    icon: 'iconjiegou'\r\n  },\r\n  {\r\n    name: '大纲',\r\n    value: 'outline',\r\n    icon: 'iconfuhao-dagangshu'\r\n  },\r\n  {\r\n    name: '快捷键',\r\n    value: 'shortcutKey',\r\n    icon: 'iconjianpan'\r\n  }\r\n]\r\n\r\n// 下载类型列表\r\nexport const downTypeList = [\r\n  {\r\n    name: '专有文件',\r\n    type: 'smm',\r\n    icon: 'iconwenjian',\r\n    desc: '可用于导入'\r\n  },\r\n  {\r\n    name: 'JSON',\r\n    type: 'json',\r\n    icon: 'iconjson',\r\n    desc: '流行的数据交换格式，可用于导入'\r\n  },\r\n  {\r\n    name: '图片',\r\n    type: 'png',\r\n    icon: 'iconPNG',\r\n    desc: '适合查看分享'\r\n  },\r\n  {\r\n    name: 'SVG',\r\n    type: 'svg',\r\n    icon: 'iconSVG',\r\n    desc: '可缩放矢量图形'\r\n  },\r\n  {\r\n    name: 'PDF',\r\n    type: 'pdf',\r\n    icon: 'iconpdf',\r\n    desc: '适合打印'\r\n  },\r\n  {\r\n    name: 'Markdown',\r\n    type: 'md',\r\n    icon: 'iconmarkdown',\r\n    desc: '便于其他软件打开'\r\n  },\r\n  {\r\n    name: 'XMind',\r\n    type: 'xmind',\r\n    icon: 'iconxmind',\r\n    desc: 'XMind格式'\r\n  },\r\n  {\r\n    name: 'Txt',\r\n    type: 'txt',\r\n    icon: 'iconTXT',\r\n    desc: '纯文本文件'\r\n  }\r\n]\r\n\r\n// 编号类型列表\r\nexport const numberTypeList = [\r\n  {\r\n    name: '无编号',\r\n    value: ''\r\n  },\r\n  {\r\n    name: '1, 2, 3',\r\n    value: 1\r\n  },\r\n  {\r\n    name: '1., 2., 3.',\r\n    value: 2\r\n  },\r\n  {\r\n    name: '(1), (2), (3)',\r\n    value: 3\r\n  },\r\n  {\r\n    name: 'a., b., c.',\r\n    value: 4\r\n  },\r\n  {\r\n    name: 'A., B., C.',\r\n    value: 5\r\n  },\r\n  {\r\n    name: 'i., ii., iii.',\r\n    value: 6\r\n  },\r\n  {\r\n    name: 'I., II., III.',\r\n    value: 7\r\n  },\r\n  {\r\n    name: '一、, 二、, 三、',\r\n    value: 8\r\n  }\r\n]\r\n\r\n// 编号层级列表\r\nexport const numberLevelList = [\r\n  {\r\n    name: '编号首层',\r\n    value: 1\r\n  },\r\n  {\r\n    name: '编号前两层',\r\n    value: 2\r\n  },\r\n  {\r\n    name: '编号前三层',\r\n    value: 3\r\n  },\r\n  {\r\n    name: '编号所有层',\r\n    value: 0\r\n  }\r\n]\r\n","// 字体列表\r\nexport const fontFamilyList = [\r\n  {\r\n    name: 'Song Ti',\r\n    value: '宋体, SimSun, Songti SC'\r\n  },\r\n  {\r\n    name: 'Microsoft Yahei',\r\n    value: '微软雅黑, Microsoft YaHei'\r\n  },\r\n  {\r\n    name: 'Italics',\r\n    value: '楷体, 楷体_GB2312, SimKai, STKaiti'\r\n  },\r\n  {\r\n    name: 'Boldface',\r\n    value: '黑体, SimHei, Heiti SC'\r\n  },\r\n  {\r\n    name: 'Official script',\r\n    value: '隶书, SimLi'\r\n  },\r\n  {\r\n    name: 'Andale Mono',\r\n    value: 'andale mono'\r\n  },\r\n  {\r\n    name: 'Arial',\r\n    value: 'arial, helvetica, sans-serif'\r\n  },\r\n  {\r\n    name: 'arialBlack',\r\n    value: 'arial black, avant garde'\r\n  },\r\n  {\r\n    name: 'Comic Sans Ms',\r\n    value: 'comic sans ms'\r\n  },\r\n  {\r\n    name: 'Impact',\r\n    value: 'impact, chicago'\r\n  },\r\n  {\r\n    name: 'Times New Roman',\r\n    value: 'times new roman'\r\n  },\r\n  {\r\n    name: 'Sans-Serif',\r\n    value: 'sans-serif'\r\n  },\r\n  {\r\n    name: 'serif',\r\n    value: 'serif'\r\n  }\r\n]\r\n\r\n// 边框样式\r\nexport const borderDasharrayList = [\r\n  {\r\n    name: 'Solid',\r\n    value: 'none'\r\n  },\r\n  {\r\n    name: 'Dotted1',\r\n    value: '5,5'\r\n  },\r\n  {\r\n    name: 'Dotted2',\r\n    value: '10,10'\r\n  },\r\n  {\r\n    name: 'Dotted3',\r\n    value: '20,10,5,5,5,10'\r\n  },\r\n  {\r\n    name: 'Dotted4',\r\n    value: '5, 5, 1, 5'\r\n  },\r\n  {\r\n    name: 'Dotted5',\r\n    value: '15, 10, 5, 10, 15'\r\n  },\r\n  {\r\n    name: 'Dotted6',\r\n    value: '1, 5'\r\n  },\r\n  {\r\n    name: 'Dotted7',\r\n    value: '6, 4'\r\n  }\r\n]\r\n\r\n// 连线风格\r\nexport const lineStyleList = [\r\n  {\r\n    name: 'Straight',\r\n    value: 'straight'\r\n  },\r\n  {\r\n    name: 'Curve',\r\n    value: 'curve'\r\n  },\r\n  {\r\n    name: 'Direct',\r\n    value: 'direct'\r\n  }\r\n]\r\n\r\n// 曲线风格中，根节点样式是否和其他节点保持一致\r\nexport const rootLineKeepSameInCurveList = [\r\n  {\r\n    name: 'Bracket',\r\n    value: false\r\n  },\r\n  {\r\n    name: 'Brace',\r\n    value: true\r\n  }\r\n]\r\n\r\n// 图片重复方式\r\nexport const backgroundRepeatList = [\r\n  {\r\n    name: 'No repeat',\r\n    value: 'no-repeat'\r\n  },\r\n  {\r\n    name: 'Repeat',\r\n    value: 'repeat'\r\n  },\r\n  {\r\n    name: 'Repeat-x',\r\n    value: 'repeat-x'\r\n  },\r\n  {\r\n    name: 'Repeat-y',\r\n    value: 'repeat-y'\r\n  }\r\n]\r\n\r\n// 背景图片定位\r\nexport const backgroundPositionList = [\r\n  {\r\n    name: 'Default',\r\n    value: '0% 0%'\r\n  },\r\n  {\r\n    name: 'Left top',\r\n    value: 'left top'\r\n  },\r\n  {\r\n    name: 'Left center',\r\n    value: 'left center'\r\n  },\r\n  {\r\n    name: 'Left bottom',\r\n    value: 'left bottom'\r\n  },\r\n  {\r\n    name: 'Right top',\r\n    value: 'right top'\r\n  },\r\n  {\r\n    name: 'Right center',\r\n    value: 'right center'\r\n  },\r\n  {\r\n    name: 'Right bottom',\r\n    value: 'right bottom'\r\n  },\r\n  {\r\n    name: 'Center top',\r\n    value: 'center top'\r\n  },\r\n  {\r\n    name: 'Center center',\r\n    value: 'center center'\r\n  },\r\n  {\r\n    name: 'Center bottom',\r\n    value: 'center bottom'\r\n  }\r\n]\r\n\r\nconst isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0\r\nconst ctrl = isMac ? '⌘' : 'Ctrl'\r\nconst enter = isMac ? 'Return' : 'Enter'\r\nconst macFn = isMac ? 'fn + ' : ''\r\n\r\n// 背景图片大小\r\nexport const backgroundSizeList = [\r\n  {\r\n    name: 'Auto',\r\n    value: 'auto'\r\n  },\r\n  {\r\n    name: 'Cover',\r\n    value: 'cover'\r\n  },\r\n  {\r\n    name: 'Contain',\r\n    value: 'contain'\r\n  }\r\n]\r\n\r\n// 快捷键列表\r\nexport const shortcutKeyList = [\r\n  {\r\n    type: 'Node operation',\r\n    list: [\r\n      {\r\n        icon: 'icontianjiazijiedian',\r\n        name: 'Inert child node',\r\n        value: 'Tab | Insert'\r\n      },\r\n      {\r\n        icon: 'iconjiedian',\r\n        name: 'Insert sibling node',\r\n        value: enter\r\n      },\r\n      {\r\n        icon: 'icondodeparent',\r\n        name: 'Insert parent node',\r\n        value: 'Shift + Tab'\r\n      },\r\n      {\r\n        icon: 'iconshangyi',\r\n        name: 'Move up node',\r\n        value: `${ctrl} + ↑`\r\n      },\r\n      {\r\n        icon: 'iconxiayi',\r\n        name: 'Move down node',\r\n        value: `${ctrl} + ↓`\r\n      },\r\n      {\r\n        icon: 'icongaikuozonglan',\r\n        name: 'Insert summary',\r\n        value: `${ctrl} + G`\r\n      },\r\n      {\r\n        icon: 'iconzhankai',\r\n        name: 'Expand/UnExpand node',\r\n        value: '/'\r\n      },\r\n      {\r\n        icon: 'iconshanchu',\r\n        name: 'Delete node',\r\n        value: 'Delete | Backspace'\r\n      },\r\n      {\r\n        icon: 'iconshanchu',\r\n        name: 'Delete current node',\r\n        value: 'Shift + Backspace'\r\n      },\r\n      {\r\n        icon: 'iconfuzhi',\r\n        name: 'Copy node',\r\n        value: `${ctrl} + C`\r\n      },\r\n      {\r\n        icon: 'iconjianqie',\r\n        name: 'Cut node',\r\n        value: `${ctrl} + X`\r\n      },\r\n      {\r\n        icon: 'iconniantie',\r\n        name: 'Paste node',\r\n        value: `${ctrl} + V`\r\n      },\r\n      {\r\n        icon: 'iconbianji',\r\n        name: 'Edit node',\r\n        value: macFn + 'F2'\r\n      },\r\n      {\r\n        icon: 'iconhuanhang',\r\n        name: 'Text Wrap',\r\n        value: `Shift + ${enter}`\r\n      },\r\n      {\r\n        icon: 'iconhoutui-shi',\r\n        name: 'Undo',\r\n        value: `${ctrl} + Z`\r\n      },\r\n      {\r\n        icon: 'iconqianjin1',\r\n        name: 'Redo',\r\n        value: `${ctrl} + Y`\r\n      },\r\n      {\r\n        icon: 'iconquanxuan',\r\n        name: 'Select All',\r\n        value: `${ctrl} + A`\r\n      },\r\n      {\r\n        icon: 'iconquanxuan',\r\n        name: 'Multiple choice',\r\n        value: `Right click / ${ctrl} + Left click`\r\n      },\r\n      {\r\n        icon: 'iconzhengli',\r\n        name: 'Arrange layout',\r\n        value: `${ctrl} + L`\r\n      },\r\n      {\r\n        icon: 'iconsousuo',\r\n        name: 'Search and Replace',\r\n        value: `${ctrl} + F`\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    type: 'Canvas operation',\r\n    list: [\r\n      {\r\n        icon: 'iconfangda',\r\n        name: 'Zoom in',\r\n        value: `${ctrl} + +`\r\n      },\r\n      {\r\n        icon: 'iconsuoxiao',\r\n        name: 'Zoom out',\r\n        value: `${ctrl} + -`\r\n      },\r\n      {\r\n        icon: 'iconfangda',\r\n        name: 'Zoom in/Zoom out',\r\n        value: `${ctrl} + Mouse wheel`\r\n      },\r\n      {\r\n        icon: 'icondingwei',\r\n        name: 'Back root node',\r\n        value: `${ctrl} + ${enter}`\r\n      },\r\n      {\r\n        icon: 'iconquanping1',\r\n        name: 'fit canvas',\r\n        value: `${ctrl} + i`\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    type: 'Outline Operation',\r\n    list: [\r\n      {\r\n        icon: 'iconhuanhang',\r\n        name: 'Text Wrap',\r\n        value: `Shift + ${enter}`\r\n      },\r\n      {\r\n        icon: 'iconshanchu',\r\n        name: 'Delete current node',\r\n        value: 'Delete'\r\n      },\r\n      {\r\n        icon: 'icontianjiazijiedian',\r\n        name: 'Inert child node',\r\n        value: 'Tab'\r\n      },\r\n      {\r\n        icon: 'iconjiedian',\r\n        name: 'Insert sibling node',\r\n        value: enter\r\n      },\r\n      {\r\n        icon: 'icondodeparent',\r\n        name: 'Move up one level',\r\n        value: 'Shift + Tab'\r\n      }\r\n    ]\r\n  }\r\n]\r\n\r\n// 形状列表\r\nexport const shapeList = [\r\n  {\r\n    name: 'Rectangle',\r\n    value: 'rectangle'\r\n  },\r\n  {\r\n    name: 'Diamond',\r\n    value: 'diamond'\r\n  },\r\n  {\r\n    name: 'Parallelogram',\r\n    value: 'parallelogram'\r\n  },\r\n  {\r\n    name: 'Rounded rectangle',\r\n    value: 'roundedRectangle'\r\n  },\r\n  {\r\n    name: 'Octagonal rectangle',\r\n    value: 'octagonalRectangle'\r\n  },\r\n  {\r\n    name: 'Outer triangular rectangle',\r\n    value: 'outerTriangularRectangle'\r\n  },\r\n  {\r\n    name: 'Inner triangular rectangle',\r\n    value: 'innerTriangularRectangle'\r\n  },\r\n  {\r\n    name: 'Ellipse',\r\n    value: 'ellipse'\r\n  },\r\n  {\r\n    name: 'Circle',\r\n    value: 'circle'\r\n  }\r\n]\r\n\r\n// 侧边栏列表\r\nexport const sidebarTriggerList = [\r\n  {\r\n    name: 'Node style',\r\n    value: 'nodeStyle',\r\n    icon: 'iconzhuti'\r\n  },\r\n  {\r\n    name: 'Base style',\r\n    value: 'baseStyle',\r\n    icon: 'iconyangshi'\r\n  },\r\n  {\r\n    name: 'Theme',\r\n    value: 'theme',\r\n    icon: 'iconjingzi'\r\n  },\r\n  {\r\n    name: 'Structure',\r\n    value: 'structure',\r\n    icon: 'iconjiegou'\r\n  },\r\n  {\r\n    name: 'Outline',\r\n    value: 'outline',\r\n    icon: 'iconfuhao-dagangshu'\r\n  },\r\n  {\r\n    name: 'ShortcutKey',\r\n    value: 'shortcutKey',\r\n    icon: 'iconjianpan'\r\n  }\r\n]\r\n\r\n// 下载类型列表\r\nexport const downTypeList = [\r\n  {\r\n    name: 'Dedicated file',\r\n    type: 'smm',\r\n    icon: 'iconwenjian',\r\n    desc: 'Available for import'\r\n  },\r\n  {\r\n    name: 'JSON',\r\n    type: 'json',\r\n    icon: 'iconjson',\r\n    desc: 'Popular data exchange formats, Available for import'\r\n  },\r\n  {\r\n    name: 'Image',\r\n    type: 'png',\r\n    icon: 'iconPNG',\r\n    desc: 'Suitable for viewing and sharing'\r\n  },\r\n  {\r\n    name: 'SVG',\r\n    type: 'svg',\r\n    icon: 'iconSVG',\r\n    desc: 'Scalable Vector Graphics'\r\n  },\r\n  {\r\n    name: 'PDF',\r\n    type: 'pdf',\r\n    icon: 'iconpdf',\r\n    desc: 'Suitable for printing'\r\n  },\r\n  {\r\n    name: 'Markdown',\r\n    type: 'md',\r\n    icon: 'iconmarkdown',\r\n    desc: 'Easy for other software to open'\r\n  },\r\n  {\r\n    name: 'XMind',\r\n    type: 'xmind',\r\n    icon: 'iconxmind',\r\n    desc: 'XMind file'\r\n  },\r\n  {\r\n    name: 'Txt',\r\n    type: 'txt',\r\n    icon: 'iconTXT',\r\n    desc: 'Plain text file'\r\n  }\r\n]\r\n\r\n// 编号类型列表\r\nexport const numberTypeList = [\r\n  {\r\n    name: 'None',\r\n    value: ''\r\n  },\r\n  {\r\n    name: '1, 2, 3',\r\n    value: 1\r\n  },\r\n  {\r\n    name: '1., 2., 3.',\r\n    value: 2\r\n  },\r\n  {\r\n    name: '(1), (2), (3)',\r\n    value: 3\r\n  },\r\n  {\r\n    name: 'a., b., c.',\r\n    value: 4\r\n  },\r\n  {\r\n    name: 'A., B., C.',\r\n    value: 5\r\n  },\r\n  {\r\n    name: 'i., ii., iii.',\r\n    value: 6\r\n  },\r\n  {\r\n    name: 'I., II., III.',\r\n    value: 7\r\n  },\r\n  {\r\n    name: '一、, 二、, 三、',\r\n    value: 8\r\n  }\r\n]\r\n\r\n// 编号层级列表\r\nexport const numberLevelList = [\r\n  {\r\n    name: '1 level',\r\n    value: 1\r\n  },\r\n  {\r\n    name: '2 level',\r\n    value: 2\r\n  },\r\n  {\r\n    name: '3 level',\r\n    value: 3\r\n  },\r\n  {\r\n    name: 'All level',\r\n    value: 0\r\n  }\r\n]\r\n","import {\r\n  fontSizeList,\r\n  lineHeightList,\r\n  colorList,\r\n  borderWidthList,\r\n  borderRadiusList,\r\n  lineWidthList,\r\n  store,\r\n  langList,\r\n  fontFamilyList as fontFamilyListZh,\r\n  borderDasharrayList as borderDasharrayListZh,\r\n  lineStyleList as lineStyleListZh,\r\n  rootLineKeepSameInCurveList as rootLineKeepSameInCurveListZh,\r\n  backgroundRepeatList as backgroundRepeatListZh,\r\n  backgroundPositionList as backgroundPositionListZh,\r\n  shortcutKeyList as shortcutKeyListZh,\r\n  shapeList as shapeListZh,\r\n  sidebarTriggerList as sidebarTriggerListZh,\r\n  backgroundSizeList as backgroundSizeListZh,\r\n  downTypeList as downTypeListZh,\r\n  shapeListMap as shapeListMapZh,\r\n  lineStyleMap as lineStyleMapZh,\r\n  numberTypeList as numberTypeListZh,\r\n  numberLevelList as numberLevelListZh\r\n} from './zh'\r\nimport {\r\n  fontFamilyList as fontFamilyListEn,\r\n  borderDasharrayList as borderDasharrayListEn,\r\n  lineStyleList as lineStyleListEn,\r\n  rootLineKeepSameInCurveList as rootLineKeepSameInCurveListEn,\r\n  backgroundRepeatList as backgroundRepeatListEn,\r\n  backgroundPositionList as backgroundPositionListEn,\r\n  shortcutKeyList as shortcutKeyListEn,\r\n  shapeList as shapeListEn,\r\n  sidebarTriggerList as sidebarTriggerListEn,\r\n  backgroundSizeList as backgroundSizeListEn,\r\n  downTypeList as downTypeListEn,\r\n  numberTypeList as numberTypeListEn,\r\n  numberLevelList as numberLevelListEn\r\n} from './en'\r\n\r\nconst fontFamilyList = {\r\n  zh: fontFamilyListZh,\r\n  en: fontFamilyListEn\r\n}\r\n\r\nconst borderDasharrayList = {\r\n  zh: borderDasharrayListZh,\r\n  en: borderDasharrayListEn\r\n}\r\n\r\nconst lineStyleList = {\r\n  zh: lineStyleListZh,\r\n  en: lineStyleListEn\r\n}\r\n\r\nconst lineStyleMap = {\r\n  zh: lineStyleMapZh,\r\n  en: lineStyleMapZh\r\n}\r\n\r\nconst rootLineKeepSameInCurveList = {\r\n  zh: rootLineKeepSameInCurveListZh,\r\n  en: rootLineKeepSameInCurveListEn\r\n}\r\n\r\nconst backgroundRepeatList = {\r\n  zh: backgroundRepeatListZh,\r\n  en: backgroundRepeatListEn\r\n}\r\n\r\nconst backgroundPositionList = {\r\n  zh: backgroundPositionListZh,\r\n  en: backgroundPositionListEn\r\n}\r\n\r\nconst backgroundSizeList = {\r\n  zh: backgroundSizeListZh,\r\n  en: backgroundSizeListEn\r\n}\r\n\r\nconst shortcutKeyList = {\r\n  zh: shortcutKeyListZh,\r\n  en: shortcutKeyListEn\r\n}\r\n\r\nconst shapeList = {\r\n  zh: shapeListZh,\r\n  en: shapeListEn\r\n}\r\n\r\nconst shapeListMap = {\r\n  zh: shapeListMapZh,\r\n  en: shapeListMapZh\r\n}\r\n\r\nconst sidebarTriggerList = {\r\n  zh: sidebarTriggerListZh,\r\n  en: sidebarTriggerListEn\r\n}\r\n\r\nconst downTypeList = {\r\n  zh: downTypeListZh,\r\n  en: downTypeListEn\r\n}\r\n\r\nconst numberTypeList = {\r\n  zh: numberTypeListZh,\r\n  en: numberTypeListEn\r\n}\r\n\r\nconst numberLevelList = {\r\n  zh: numberLevelListZh,\r\n  en: numberLevelListEn\r\n}\r\n\r\nexport {\r\n  fontSizeList,\r\n  lineHeightList,\r\n  borderWidthList,\r\n  borderRadiusList,\r\n  lineWidthList,\r\n  store,\r\n  colorList,\r\n  langList,\r\n  fontFamilyList,\r\n  borderDasharrayList,\r\n  lineStyleList,\r\n  lineStyleMap,\r\n  rootLineKeepSameInCurveList,\r\n  backgroundRepeatList,\r\n  backgroundPositionList,\r\n  backgroundSizeList,\r\n  shortcutKeyList,\r\n  shapeList,\r\n  shapeListMap,\r\n  sidebarTriggerList,\r\n  downTypeList,\r\n  numberTypeList,\r\n  numberLevelList\r\n}\r\n","<template>\r\n    <div class=\"colorContainer\">\r\n        <div class=\"colorList\">\r\n            <span\r\n                class=\"colorItem\"\r\n                v-for=\"item in colorList\"\r\n                :style=\"{ backgroundColor: item }\"\r\n                :class=\"{ icontouming: item === 'transparent' }\"\r\n                :key=\"item\"\r\n                @click=\"() => ((color = item), emit('change', color))\"\r\n            ></span>\r\n        </div>\r\n        <div class=\"moreColor\">\r\n            <span @click=\"() => picker.show()\"> {{ t('color.moreColor') }}</span>\r\n            <el-color-picker\r\n                ref=\"picker\"\r\n                :tabindex=\"1\"\r\n                @change=\"(e: string) => emit('change', e)\"\r\n                size=\"small\"\r\n                v-model=\"color\"\r\n                :teleported=\"false\"\r\n            ></el-color-picker>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { colorList } from '@/config';\r\nimport { ref } from 'vue';\r\nimport { useI18n } from 'vue-i18n';\r\nconst { t } = useI18n();\r\n\r\nconst picker = ref<any>();\r\nconst emit = defineEmits(['change']);\r\nconst color = defineModel<String>('color', {\r\n    default: '#ffffff'\r\n});\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n:deep(.el-color-picker__trigger) {\r\n    border: none;\r\n}\r\n:deep(.el-color-picker__panel) {\r\n    z-index: 10000 !important;\r\n}\r\n// :deep(.el-color-dropdown__btns) {\r\n//     display: none;\r\n// }\r\n.colorContainer {\r\n    padding: 5px;\r\n    .colorList {\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        justify-content: space-between;\r\n        .colorItem {\r\n            display: flex;\r\n            align-items: center;\r\n            width: 15px;\r\n            height: 15px;\r\n            margin: 2px;\r\n            cursor: pointer;\r\n        }\r\n    }\r\n\r\n    .moreColor {\r\n        display: flex;\r\n        align-items: center;\r\n\r\n        span {\r\n            margin-right: 5px;\r\n            cursor: pointer;\r\n        }\r\n    }\r\n}\r\n</style>\r\n","export async function sleep(ms: number): Promise<void> {\r\n    return new Promise((resolve) => {\r\n        setTimeout(resolve, ms);\r\n    });\r\n}\r\n","import { computed } from 'vue';\r\nimport { defineStore } from 'pinia';\r\nimport type { MindMap } from 'types';\r\nimport { sleep } from '@/utils/async_utils';\r\n\r\nexport const useMainStore = defineStore('main', () => {\r\n    let _mindMap: MindMap = null as any; // 使用 ref 包装后，所有事件操作都会报错，原因未知\r\n    const mindMap = computed(() => _mindMap);\r\n    function setMindMap(mindMapIns: MindMap) {\r\n        if (_mindMap) _mindMap.setFullData(mindMapIns.getData(true));\r\n        else _mindMap = mindMapIns;\r\n    }\r\n\r\n    async function loadData(data: any) {\r\n        if (typeof data !== 'object') throw new Error('fileContentError');\r\n        if (data.root) {\r\n            _mindMap.setFullData(data);\r\n            await sleep(1500);\r\n            _mindMap.setFullData(data); // 第二次设置数据，解决第一次加载字体不生效的问题\r\n        } else {\r\n            _mindMap.setData(data);\r\n            await sleep(1500);\r\n            _mindMap.setData(data);\r\n        }\r\n    }\r\n\r\n    return { mindMap, setMindMap, loadData };\r\n});\r\n","<script lang=\"ts\" setup>\r\nimport ColorPicker from './ColorPicker.vue';\r\nimport { computed, onMounted, reactive, ref } from 'vue';\r\nimport remixiconUrl from 'remixicon/fonts/remixicon.symbol.svg';\r\nimport { fontFamilyList, fontSizeList } from '@/config';\r\nimport { useI18n } from 'vue-i18n';\r\nimport { useMainStore } from '@/stores/main';\r\nimport { storeToRefs } from 'pinia';\r\n\r\nconst { mindMap } = storeToRefs(useMainStore());\r\nconst { locale } = useI18n();\r\n\r\ninterface FormatInfo {\r\n    bold: Boolean;\r\n    italic: Boolean;\r\n    underline: Boolean;\r\n    strike: Boolean;\r\n    font: String;\r\n    size: String;\r\n    color: String;\r\n    background: String;\r\n}\r\n\r\nconst items = reactive([\r\n    {\r\n        icon: 'bold',\r\n        title: 'Bold',\r\n        action: () => (formatInfo.value.bold = !formatInfo.value.bold),\r\n        isActive: () => formatInfo.value.bold\r\n    },\r\n    {\r\n        icon: 'italic',\r\n        title: 'Italic',\r\n        action: () => (formatInfo.value.italic = !formatInfo.value.italic),\r\n        isActive: () => formatInfo.value.italic\r\n    },\r\n    {\r\n        icon: 'strikethrough',\r\n        title: 'Strike',\r\n        action: () => (formatInfo.value.strike = !formatInfo.value.strike),\r\n        isActive: () => formatInfo.value.strike\r\n    },\r\n    {\r\n        icon: 'underline',\r\n        title: 'Underline',\r\n        action: () => (formatInfo.value.underline = !formatInfo.value.underline),\r\n        isActive: () => formatInfo.value.underline\r\n    },\r\n    {\r\n        icon: 'font-family',\r\n        title: 'Font Family',\r\n        action: (font: String) => (formatInfo.value.font = font)\r\n    },\r\n    {\r\n        icon: 'font-size',\r\n        title: 'Font Size',\r\n        action: (size?: any) => (formatInfo.value.size = size)\r\n    },\r\n    {\r\n        icon: 'mark-pen-line',\r\n        title: 'Highlight'\r\n    },\r\n    {\r\n        icon: 'font-color',\r\n        title: 'Font Color'\r\n    },\r\n    {\r\n        icon: 'eraser-line',\r\n        title: 'Clear Format',\r\n        action: () => ((formatInfo.value = {} as any), mindMap.value.richText.removeFormat())\r\n    }\r\n]);\r\nconst style = reactive({\r\n    left: '0px',\r\n    top: '0px'\r\n});\r\nconst show = ref(false);\r\nconst formatInfo = ref({} as FormatInfo);\r\nconst fontFamilyItems = computed(() => fontFamilyList[locale.value] || fontFamilyList['zh']);\r\n\r\nonMounted(() => {\r\n    mindMap.value.on('rich_text_selection_change', onRichTextSelectionChange);\r\n    mindMap.value.on('svg_mousedown', () => (colorPickerCur.value = false));\r\n});\r\nfunction onRichTextSelectionChange(hasRange: boolean, rect: any, _formatInfo: any) {\r\n    if (hasRange) {\r\n        style.left = rect.left + rect.width / 2 + 'px';\r\n        style.top = `calc(${rect.top}px - 2.5rem)`;\r\n        if (Array.isArray(_formatInfo.background)) _formatInfo.background = _formatInfo.background[0];\r\n        if (Array.isArray(_formatInfo.color)) _formatInfo.color = _formatInfo.color[0];\r\n        formatInfo.value = { ...(_formatInfo || {}) };\r\n        show.value = true;\r\n    }\r\n    if (!colorPickerCur.value) {\r\n        show.value = hasRange;\r\n        colorPickerVis.value = '';\r\n    }\r\n}\r\nfunction onFormatChange(item: any, ...args: any[]) {\r\n    item.action?.(...args);\r\n    mindMap.value.richText.formatText(formatInfo.value);\r\n}\r\n\r\nconst colorPickerVis = ref('');\r\nconst colorPickerCur = ref(false);\r\n</script>\r\n\r\n<template>\r\n    <div class=\"menubar\" v-show=\"show || colorPickerCur\" :style=\"style\">\r\n        <div v-for=\"(item, i) in items\" :key=\"`${item}_${i}`\" @click=\"console.log(item.title)\">\r\n            <template v-if=\"['Font Family', 'Font Size', 'Font Color', 'Highlight'].includes(item.title)\">\r\n                <el-popover placement=\"top\" width=\"12rem\" :visible=\"colorPickerVis == item.title\" popper-class=\"el-popper__no_pandding el-popper__top\">\r\n                    <template #reference>\r\n                        <button class=\"menu-item\" @mouseenter=\"() => (colorPickerVis = item.title)\">\r\n                            <svg class=\"remix\">\r\n                                <use :xlink:href=\"`${remixiconUrl}#ri-${item.icon}`\" />\r\n                            </svg>\r\n                        </button>\r\n                    </template>\r\n                    <div\r\n                        @mouseenter=\"() => (colorPickerCur = true)\"\r\n                        @mouseleave=\"() => (colorPickerCur = false)\"\r\n                        @click.stop.passive=\"() => mindMap.richText?.setSelectLast()\"\r\n                    >\r\n                        <div\r\n                            v-show=\"item.title == 'Font Family'\"\r\n                            :style=\"`font-family: ${size.name}`\"\r\n                            class=\"select-item\"\r\n                            @click.stop.passive=\"() => onFormatChange(item, size.value)\"\r\n                            v-for=\"size in fontFamilyItems\"\r\n                            :key=\"size\"\r\n                        >\r\n                            {{ size.name }}\r\n                        </div>\r\n                        <div\r\n                            v-show=\"item.title == 'Font Size'\"\r\n                            @click.stop.passive=\"() => onFormatChange(item, `${size}px`)\"\r\n                            v-for=\"size in fontSizeList\"\r\n                            :key=\"size\"\r\n                            :style=\"`font-size: ${size}px`\"\r\n                            class=\"select-item\"\r\n                        >\r\n                            {{ size }}px\r\n                        </div>\r\n                        <ColorPicker v-show=\"item.title == 'Font Color'\" v-model:color=\"formatInfo.color\" @change=\"() => onFormatChange(item)\" />\r\n                        <ColorPicker v-show=\"item.title == 'Highlight'\" v-model:color=\"formatInfo.background\" @change=\"() => onFormatChange(item)\" />\r\n                    </div>\r\n                </el-popover>\r\n            </template>\r\n            <el-tooltip v-else placement=\"bottom\" effect=\"light\" :content=\"item.title\" popper-class=\"el-popper__top\">\r\n                <button @click.stop.passive=\"() => onFormatChange(item)\" class=\"menu-item\" :class=\"{ 'is-active': item.isActive ? item.isActive() : null }\">\r\n                    <svg class=\"remix\" @mouseenter=\"() => (colorPickerVis = '')\">\r\n                        <use :xlink:href=\"`${remixiconUrl}#ri-${item.icon}`\" />\r\n                    </svg>\r\n                </button>\r\n            </el-tooltip>\r\n            <el-divider v-if=\"i < items.length - 1\" direction=\"vertical\" border-style=\"dashed\" />\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<style>\r\n.el-popper__top {\r\n    z-index: 9999 !important;\r\n}\r\n\r\n.el-popper__no_pandding {\r\n    padding: 0px !important;\r\n}\r\n</style>\r\n\r\n<style lang=\"less\" scoped>\r\n.select-item {\r\n    padding: 0.1rem 0.3rem;\r\n}\r\n\r\n.select-item:hover {\r\n    background: #eeeeee;\r\n}\r\n\r\n.menubar {\r\n    position: fixed;\r\n    z-index: 9999;\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: center;\r\n    align-items: center;\r\n    overflow: hidden;\r\n    flex-shrink: 0;\r\n    transform: translateX(-50%);\r\n    background: white;\r\n\r\n    .menu-item {\r\n        background: transparent;\r\n        border: none;\r\n        border-radius: 0.4rem;\r\n        color: #fff;\r\n        cursor: pointer;\r\n        height: 1.75rem;\r\n        width: 1.75rem;\r\n        padding: 0.2rem !important;\r\n\r\n        &:disabled svg {\r\n            fill: gray;\r\n        }\r\n\r\n        &:disabled:hover {\r\n            background: none;\r\n        }\r\n\r\n        svg {\r\n            fill: black;\r\n            height: 100%;\r\n            width: 100%;\r\n        }\r\n\r\n        &.is-active,\r\n        &:active,\r\n        &:hover {\r\n            background-color: rgb(240, 240, 240);\r\n        }\r\n    }\r\n}\r\n</style>\r\n","<template>\r\n    <div\r\n        @click.middle.prevent=\"void 0\"\r\n        @click.right.prevent=\"void 0\"\r\n        class=\"contextmenuContainer listBox\"\r\n        v-if=\"show\"\r\n        ref=\"contextmenuRef\"\r\n        :style=\"{ left: menuLoc.x + 'px', top: menuLoc.y + 'px' }\"\r\n    >\r\n        <div\r\n            class=\"item\"\r\n            v-for=\"(item, i) in nodeActive ? itemsOnNode : itemsOnSvg\"\r\n            :key=\"item.name + '_' + i\"\r\n            @click.left.stop.passive=\"() => item?.action?.() || hide()\"\r\n        >\r\n            <el-divider v-if=\"item.name === 'splitLine'\" />\r\n            <template v-else>\r\n                <el-popover\r\n                    :width=\"item?.children?.findIndex((v) => v.cutkey) > -1 ? '200px' : '60px'\"\r\n                    v-if=\"item?.children\"\r\n                    trigger=\"hover\"\r\n                    placement=\"right-start\"\r\n                    :persistent=\"false\"\r\n                >\r\n                    <template #reference>\r\n                        <div class=\"name sub-name\">{{ t('contextmenu.' + item.name) }}</div>\r\n                    </template>\r\n                    <div class=\"item\" v-for=\"_item in item.children\" :key=\"_item.name\" @click.left.stop.passive=\"() => _item?.action?.() || hide()\">\r\n                        <span class=\"name\">{{ t('contextmenu.' + _item.name) }}</span>\r\n                        <span class=\"desc\">{{ _item.cutkey }}</span>\r\n                    </div>\r\n                </el-popover>\r\n                <template v-else>\r\n                    <span class=\"name\">{{ t('contextmenu.' + item.name) }}</span>\r\n                    <span class=\"desc\">{{ item.cutkey }}</span>\r\n                </template>\r\n            </template>\r\n        </div>\r\n    </div>\r\n    <el-dialog v-model=\"imageDialogVisible\" width=\"800\">\r\n        <el-image v-if=\"image.url?.length > 0\" style=\"width: 100px; height: 100px\" :src=\"image.url\" />\r\n        <el-upload v-else class=\"upload-demo\" drag multiple :auto-upload=\"false\" :limit=\"1\" :on-change=\"handleSelectImage\" :show-file-list=\"false\">\r\n            <div class=\"el-upload__text\">Drop file here or <em>click to upload</em></div>\r\n        </el-upload>\r\n        <template #footer>\r\n            <el-button type=\"primary\" @click=\"insertImage\">确定</el-button>\r\n            <el-button type=\"default\" @click=\"imageDialogVisible = false\">取消</el-button>\r\n        </template>\r\n    </el-dialog>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { getTextFromHtml, downloadFile } from 'simple-mind-map/src/utils';\r\nimport { storeToRefs } from 'pinia';\r\nimport { useMainStore } from '@/stores/main';\r\nimport { computed, nextTick, onMounted, reactive, ref } from 'vue';\r\nimport { useI18n } from 'vue-i18n';\r\nimport { ElMessage } from 'element-plus';\r\nconst store = useMainStore();\r\nconst { mindMap } = storeToRefs(store);\r\nconst { t } = useI18n();\r\n\r\nconst show = ref(false);\r\nconst nodeActive = ref(false);\r\nconst curNode = ref<any>(null);\r\nconst contextmenuRef = ref<any>(null);\r\nconst menuLoc = reactive<{ x: number; y: number }>({ x: 0, y: 0 });\r\nconst svgOpt = reactive<{\r\n    x?: number;\r\n    y?: number;\r\n    isMousedown?: boolean;\r\n}>({});\r\n\r\ndeclare interface IItem {\r\n    name: string;\r\n    action?: (args?: any) => void;\r\n    cutkey?: string;\r\n    children?: IItem[];\r\n}\r\nconst imageDialogVisible = ref(false);\r\nconst image = ref({\r\n    url: '',\r\n    title: '',\r\n    width: 100,\r\n    height: 100\r\n});\r\n\r\nconst itemsOnNode: IItem[] = [\r\n    { name: 'insertSiblingNode', cutkey: 'Enter', action: () => mindMap.value.execCommand('INSERT_NODE') },\r\n    { name: 'insertChildNode', cutkey: 'Tab', action: () => mindMap.value.execCommand('INSERT_CHILD_NODE') },\r\n    { name: 'insertParentNode', cutkey: 'Shift + Tab', action: () => mindMap.value.execCommand('INSERT_PARENT_NODE') },\r\n    { name: 'insertSummary', action: () => mindMap.value.execCommand('ADD_GENERALIZATION') },\r\n    { name: 'splitLine' },\r\n    { name: 'insertImage', action: () => (hide(), (imageDialogVisible.value = true)) },\r\n    {\r\n        name: 'addNote',\r\n        action: () => {\r\n            curNode.value.setNote('');\r\n            console.log(curNode.value);\r\n        }\r\n    },\r\n    { name: 'splitLine' },\r\n    { name: 'moveUpNode', cutkey: 'Ctrl + ↑', action: () => mindMap.value.execCommand('UP_NODE') },\r\n    { name: 'moveDownNode', cutkey: 'Ctrl + ↓', action: () => mindMap.value.execCommand('DOWN_NODE') },\r\n    { name: 'moveUpOneLevel', cutkey: '', action: () => mindMap.value.execCommand('MOVE_UP_ONE_LEVEL') },\r\n    { name: 'deleteNode', cutkey: 'Delete', action: () => mindMap.value.execCommand('REMOVE_NODE') },\r\n    { name: 'deleteCurrentNode', cutkey: 'Shift + Backspace', action: () => mindMap.value.execCommand('REMOVE_CURRENT_NODE') },\r\n    { name: 'splitLine' },\r\n    { name: 'copyNode', cutkey: 'Ctrl + C', action: () => mindMap.value.renderer.copy() },\r\n    { name: 'cutNode', cutkey: 'Ctrl + X', action: () => mindMap.value.renderer.cut() },\r\n    { name: 'pasteNode', cutkey: 'Ctrl + V', action: () => mindMap.value.renderer.paste() },\r\n    { name: 'splitLine' },\r\n    { name: 'exportNodeToPng', cutkey: '', action: exportPNG }\r\n];\r\nconst expandList = computed(() => {\r\n    const res: IItem[] = [] as any;\r\n    for (let i = 0; i < 6; i++)\r\n        res.push({\r\n            name: `level${i + 1}`,\r\n            children: [],\r\n            action: () => mindMap.value.execCommand('UNEXPAND_TO_LEVEL', i + 1)\r\n        });\r\n    return res;\r\n});\r\nconst itemsOnSvg: IItem[] = [\r\n    { name: 'expandAll', cutkey: '', action: () => mindMap.value.execCommand('EXPAND_ALL') },\r\n    { name: 'unExpandAll', cutkey: '', action: () => mindMap.value.execCommand('UNEXPAND_ALL') },\r\n    { name: 'expandTo', cutkey: '', children: expandList.value },\r\n    { name: 'arrangeLayout', cutkey: 'Ctrl + L', action: () => mindMap.value.execCommand('RESET_LAYOUT') },\r\n    { name: 'fitCanvas', cutkey: 'Ctrl + i', action: () => mindMap.value.view.fit(() => void 0, false, null) },\r\n    { name: 'repairFormula', cutkey: '', action: () => (mindMap.value.formula.repairFormula(), ElMessage.success('修复公式成功'), hide()) }\r\n];\r\n\r\nonMounted(() => {\r\n    mindMap.value.on('node_contextmenu', showNodeContextMenu);\r\n    mindMap.value.on('contextmenu', (e) => display(e.clientX, e.clientY));\r\n    mindMap.value.on('svg_mousedown', hide);\r\n});\r\n\r\n// 计算右键菜单元素的显示位置\r\nfunction getShowPosition(x: number, y: number) {\r\n    const rect = contextmenuRef.value.getBoundingClientRect();\r\n    if (x + rect.width > window.innerWidth) x = x - rect.width - 20;\r\n    if (y + rect.height > window.innerHeight) y = window.innerHeight - rect.height - 10;\r\n    return { x, y };\r\n}\r\n// 隐藏右键菜单\r\nfunction hide() {\r\n    if (!show.value) return;\r\n    show.value = false;\r\n    svgOpt.isMousedown = false;\r\n    nodeActive.value = false;\r\n    curNode.value = null;\r\n}\r\n// 显示右键菜单\r\nfunction display(x: number, y: number) {\r\n    menuLoc.x = x;\r\n    menuLoc.y = y;\r\n    show.value = true;\r\n    nextTick(() => Object.assign(menuLoc, getShowPosition(menuLoc.x, menuLoc.y)));\r\n}\r\n// 节点右键显示\r\nfunction showNodeContextMenu(e: any, node: any) {\r\n    curNode.value = node;\r\n    nodeActive.value = true;\r\n    display(e.clientX, e.clientY);\r\n}\r\n// 导出节点为PNG\r\nfunction exportPNG() {\r\n    const _node = curNode.value;\r\n    mindMap.value.doExport\r\n        .png('', null, _node)\r\n        .then((data: any) => {\r\n            downloadFile(data, getTextFromHtml(_node?.getData('text')));\r\n        })\r\n        .catch((err) => {\r\n            console.error(err);\r\n            ElMessage.error('导出失败');\r\n            hide();\r\n        });\r\n}\r\nfunction insertImage() {\r\n    if (image.value.url.length === 0) return ElMessage.warning('请先选择图片或输入 URL');\r\n    curNode.value.setImage({ ...image.value });\r\n    imageDialogVisible.value = false;\r\n}\r\n\r\nfunction handleSelectImage(uploadFile: any, uploadFiles: any) {\r\n    console.log(uploadFile, uploadFiles);\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n        image.value.url = (e.target?.result ?? '') as string;\r\n        image.value.title = uploadFile.name;\r\n    };\r\n    reader.readAsDataURL(uploadFile.raw);\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.listBox {\r\n    width: 14rem;\r\n    background: #fff;\r\n    box-shadow: 0 4px 4px 0 hsla(0, 0%, 69%, 0.5);\r\n    border-radius: 4px;\r\n    padding-top: 16px;\r\n    padding-bottom: 16px;\r\n}\r\n.item:hover {\r\n    background: #f5f5f5;\r\n    .subItems {\r\n        visibility: visible;\r\n    }\r\n}\r\n.contextmenuContainer {\r\n    position: fixed;\r\n    font-size: small;\r\n}\r\n.item {\r\n    position: relative;\r\n    height: 1.8rem;\r\n    padding: 0 1rem;\r\n    cursor: pointer;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    &.danger {\r\n        color: #f56c6c;\r\n    }\r\n\r\n    &.disabled {\r\n        color: grey;\r\n        cursor: not-allowed;\r\n        pointer-events: none;\r\n\r\n        &:hover {\r\n            background: #fff;\r\n        }\r\n    }\r\n\r\n    .name {\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n    }\r\n    .sub-name {\r\n        width: 100%;\r\n    }\r\n\r\n    .desc {\r\n        color: #999;\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n    }\r\n\r\n    .subItems {\r\n        position: absolute;\r\n        left: 100%;\r\n        visibility: hidden;\r\n        width: 150px;\r\n        cursor: auto;\r\n\r\n        &.showLeft {\r\n            left: -150px;\r\n        }\r\n    }\r\n}\r\n</style>\r\n","async function getSettings() {\r\n    // 从本地存储中获取设置\r\n    const settings = localStorage.getItem('settings');\r\n    if (settings) {\r\n        return JSON.parse(settings);\r\n    }\r\n    return {};\r\n}\r\n\r\nasync function saveSettings(settings) {\r\n    // 保存设置到本地存储\r\n    localStorage.setItem('settings', JSON.stringify(settings));\r\n}\r\n\r\nexport default { getSettings, saveSettings };\r\n","import { type MindMap } from '@/types';\r\nimport _MindMap from 'simple-mind-map';\r\nimport { sleep } from '@/utils/async_utils';\r\nimport settingsApi from './settingsApi';\r\n\r\nlet fileHandle: FileSystemFileHandle | null = null;\r\n\r\nasync function readFileAsync(file: File): Promise<string> {\r\n    return new Promise((resolve, reject) => {\r\n        const reader = new FileReader();\r\n        reader.onload = () => {\r\n            resolve(reader.result as string);\r\n        };\r\n        reader.onerror = () => {\r\n            reject(reader.error);\r\n        };\r\n        reader.readAsText(file);\r\n    });\r\n}\r\nasync function create() {\r\n    const mindMap = new _MindMap({\r\n        el: document.getElementById('mindMapContainer'),\r\n        data: {\r\n            data: {\r\n                text: '根节点'\r\n            },\r\n            children: []\r\n        }\r\n    } as any) as MindMap;\r\n    await saveData(mindMap);\r\n    return mindMap;\r\n}\r\nasync function loadData() {\r\n    if (!window.showOpenFilePicker) throw new Error('File picker API not available');\r\n    const handles = await window.showOpenFilePicker({\r\n        types: [{ description: '', accept: { 'application/json': ['.smm'] } }],\r\n        excludeAcceptAllOption: true\r\n    });\r\n    fileHandle = handles[0];\r\n    const file = await fileHandle!.getFile();\r\n    const fileContent = await readFileAsync(file);\r\n    return JSON.parse(fileContent) as object;\r\n}\r\nasync function saveData(mandMap: MindMap) {\r\n    const data = JSON.stringify(mandMap.getData(true));\r\n    try {\r\n        if (!fileHandle) {\r\n            if (!window.showSaveFilePicker) throw new Error('File saver API not available');\r\n            fileHandle = await window.showSaveFilePicker({\r\n                suggestedName: 'mindmap.smm',\r\n                types: [{ description: '', accept: { 'application/json': ['.smm'] } }]\r\n            });\r\n        }\r\n        const writable = await fileHandle!.createWritable();\r\n        await writable.write(data);\r\n        await writable.close();\r\n    } catch (error) {\r\n        console.error('Error saving data:', error instanceof Error ? error.message : 'unknown error');\r\n    }\r\n}\r\n\r\nexport { loadData, saveData, create, settingsApi };\r\n","import { settingsApi } from '@/api';\r\nimport type { GithubSettings, Settings } from '@/types/settings';\r\nimport { defineStore } from 'pinia';\r\nimport { ref } from 'vue';\r\nexport const useSettingsStore = defineStore('settings', () => {\r\n    const defaultGithubSettings: GithubSettings = {\r\n        access_token: '',\r\n        api_url: 'https://gitee.com/api/v5/repos',\r\n        owner: '',\r\n        repo: '',\r\n        ref: 'master',\r\n        branch: 'master'\r\n    };\r\n    const settings = ref<Settings>({\r\n        language: 'zh-CN',\r\n        github: {} as GithubSettings\r\n    });\r\n    const init = () => {\r\n        settingsApi.getSettings().then((data) => {\r\n            settings.value = { ...data };\r\n        });\r\n    };\r\n    const setGithub = (data: GithubSettings) => {\r\n        settings.value.github = { ...defaultGithubSettings, ...data };\r\n        settingsApi.saveSettings(settings.value);\r\n    };\r\n    return { settings, init, setGithub };\r\n});\r\n","import { defineStore } from 'pinia';\r\nimport { ref } from 'vue';\r\nexport const useStateStore = defineStore('state', () => {\r\n    const loading = ref(false);\r\n    async function loadingWapper(fn: (..._args: any[]) => void, ...args: any[]) {\r\n        try {\r\n            loading.value = true;\r\n            const promise: any = fn(...args);\r\n            if (promise instanceof Promise) {\r\n                const res = await promise;\r\n                return res;\r\n            } else {\r\n                return promise;\r\n            }\r\n        } finally {\r\n            loading.value = false;\r\n        }\r\n    }\r\n    return { loading, loadingWapper };\r\n});\r\n","import axios from 'axios';\r\n\r\nconst axiosIns = axios.create({\r\n    headers: {\r\n        'Content-Type': 'application/json'\r\n    }\r\n});\r\n\r\naxiosIns.interceptors.response.use(\r\n    (response) => {\r\n        return response.data;\r\n    },\r\n    (error) => {\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\nexport default axiosIns;\r\n","import type { GithubSettings } from '@/types/settings';\r\n\r\nimport axios from '@/api/axiosIns';\r\nimport type MindMap from 'simple-mind-map';\r\n\r\nexport interface GithubListItem {\r\n    _links: string;\r\n    content: string;\r\n    download_url: string;\r\n    encoding: string;\r\n    html_url: string;\r\n    name: string;\r\n    path: string;\r\n    sha: string;\r\n    size: number;\r\n    type: string;\r\n    url: string;\r\n}\r\n\r\nfunction utf8ToBase64(str: string) {\r\n    return btoa(new TextEncoder().encode(str).reduce((data, byte) => data + String.fromCharCode(byte), ''));\r\n}\r\nfunction base64ToUtf8(b64: string) {\r\n    return new TextDecoder().decode(Uint8Array.from(atob(b64), (c) => c.charCodeAt(0)));\r\n}\r\n\r\nasync function _get_content(options: GithubSettings, path: string) {\r\n    const { api_url, ref, owner, access_token, repo } = options;\r\n    if (!api_url || !owner || !repo || !access_token) {\r\n        throw new Error('Invalid Github settings');\r\n    }\r\n    const urlWithPath = `${api_url}/${owner}/${repo}/contents/${path}?access_token=${access_token}&ref=${ref ?? ''}`;\r\n    return axios.get<any, GithubListItem[] | { content: string }>(urlWithPath);\r\n}\r\nasync function getList(options: GithubSettings, path: string) {\r\n    const res = await _get_content(options, path);\r\n    if (!Array.isArray(res)) throw new Error('Check the path or Github settings.');\r\n    return res;\r\n}\r\n\r\nasync function getContent(options: GithubSettings, path: string) {\r\n    const res = await _get_content(options, path);\r\n    if (Array.isArray(res)) throw new Error('Check the path or Github settings.');\r\n    return base64ToUtf8(res['content']);\r\n}\r\n\r\nasync function createFile(options: GithubSettings, path: string, mandMap: MindMap, message: string = 'create file by mind map math online.') {\r\n    const { api_url, owner, repo, access_token } = options;\r\n    const urlWithPath = `${api_url}/${owner}/${repo}/contents/${path}`;\r\n    const content = utf8ToBase64(JSON.stringify(mandMap.getData(true)));\r\n    const res = await axios.post<any, { content: GithubListItem }>(urlWithPath, { access_token, content, message });\r\n    return res['content'];\r\n}\r\n\r\nasync function updateFile(options: GithubSettings, path: string, sha: string, mandMap: MindMap, message: string = 'update file by mind map math online.') {\r\n    const { api_url, owner, repo, access_token } = options;\r\n    const urlWithPath = `${api_url}/${owner}/${repo}/contents/${path}`;\r\n    const content = utf8ToBase64(JSON.stringify(mandMap.getData(true)));\r\n    const data = { access_token, content, sha, branch: options.branch ?? 'master', message };\r\n    const res = await axios.put<any, { content: GithubListItem }>(urlWithPath, data);\r\n    return res.content;\r\n}\r\n\r\nasync function deleteFile(options: GithubSettings, path: string, sha: string, message: string = 'delete file by mind map math online.') {\r\n    const { api_url, owner, repo, access_token } = options;\r\n    const urlWithPath = `${api_url}/${owner}/${repo}/contents/${path}`;\r\n    const data = { access_token, sha, branch: options.branch ?? 'master', message };\r\n    return axios.delete<any, any>(urlWithPath, { data });\r\n}\r\n\r\nexport default { getList, createFile, updateFile, getContent, deleteFile };\r\n","<script lang=\"tsx\" setup>\r\nimport { getTextFromHtml } from 'simple-mind-map/src/utils';\r\nimport { h, ref, watch } from 'vue';\r\nimport { storeToRefs } from 'pinia';\r\nimport { useSettingsStore } from '@/stores/settings';\r\nimport { useMainStore } from '@/stores/main';\r\nimport { useStateStore } from '@/stores/state';\r\nimport { loadData, saveData, create } from '@/api';\r\nimport { ElButton, ElInput, ElMessage, ElMessageBox, ElPopover } from 'element-plus';\r\nimport DynamicMenu, { type MenuItem } from './DynamicMenuItem.vue';\r\nimport githubApi, { type GithubListItem } from '@/api/githubApi';\r\n\r\nconst state = useStateStore();\r\nconst store = useMainStore();\r\nconst settingsStore = useSettingsStore();\r\nconst { mindMap } = storeToRefs(store);\r\n\r\nconst githubOpt = ref({\r\n    showDialog: false,\r\n    data: {\r\n        access_token: '',\r\n        owner: '',\r\n        repo: ''\r\n    } as any,\r\n    show() {\r\n        githubOpt.value.showDialog = true;\r\n        const { access_token, owner, repo } = settingsStore.settings.github;\r\n        githubOpt.value.data = { access_token, owner, repo };\r\n    },\r\n    confirm() {\r\n        const { access_token, owner, repo } = githubOpt.value.data;\r\n        if (!access_token || !owner || !repo) return ElMessage.error('请填写完整信息');\r\n        settingsStore.setGithub({ access_token, owner, repo } as any);\r\n        githubOpt.value.showDialog = false;\r\n    },\r\n    cancel() {\r\n        githubOpt.value.showDialog = false;\r\n    }\r\n});\r\n\r\nconst isCollapse = ref(true);\r\nconst menuRef = ref<any>();\r\nconst loadingMenu = ref(false);\r\nconst currentMenuPath = ref<string | null>(null);\r\nconst currentCloudFile = ref<GithubListItem | null>(null);\r\nconst cloudList = ref<MenuItem[]>([] as any);\r\nconst menuItems = ref<MenuItem[]>([\r\n    {\r\n        id: 'local',\r\n        title: '本地文件',\r\n        icon: 'file-line',\r\n        children: [\r\n            {\r\n                id: 'create',\r\n                title: '新建',\r\n                icon: 'sticky-note-add-line',\r\n                meta: { action: () => state.loadingWapper(create).then((res) => store.setMindMap(res)) }\r\n            },\r\n            { id: 'open', title: '打开', icon: 'folder-open-line', meta: { action: open } },\r\n            { id: 'save', title: '保存', icon: 'save-line', meta: { action: () => state.loadingWapper(saveData, mindMap.value) } }\r\n        ]\r\n    },\r\n    {\r\n        id: 'cloud',\r\n        title: '云端存储',\r\n        icon: 'cloud-line',\r\n        children: [\r\n            { id: 'create', title: '新建', icon: 'sticky-note-add-line', meta: { action: () => state.loadingWapper(createCloudFile) } },\r\n            { id: 'submit', title: '提交修改', icon: 'git-commit-line', meta: { action: () => state.loadingWapper(saveCloudFile) } },\r\n            { id: 'branch', title: settingsStore.settings.github.branch || 'master', icon: 'git-branch-line', children: cloudList.value, meta: { load: false } }\r\n        ]\r\n    },\r\n    {\r\n        id: 'import-export',\r\n        title: '导入导出',\r\n        icon: 'download-cloud-line',\r\n        children: [{ id: 'exportPng', title: '导出 png', icon: 'export-line', meta: { action: () => state.loadingWapper(exportPNG) } }]\r\n    },\r\n    {\r\n        id: 'options',\r\n        title: '设置',\r\n        icon: 'settings-3-line',\r\n        children: [\r\n            { id: 'github', title: 'Gitee', icon: 'github-line', meta: { action: githubOpt.value.show } },\r\n            {\r\n                id: 'theme',\r\n                title: '主题',\r\n                icon: 'sun-line',\r\n                children: [{ id: 'dark', title: '暗黑模式', icon: 'moon-line' }]\r\n            }\r\n        ]\r\n    }\r\n]);\r\nconst autosaveInterval = ref<number | null>(null);\r\nfunction open() {\r\n    if (!autosaveInterval.value) clearInterval(autosaveInterval.value!);\r\n    loadData().then((data) => {\r\n        state.loadingWapper(store.loadData, data).then(() => {\r\n            autosaveInterval.value = setInterval(() => {\r\n                saveData(mindMap.value).then(() => {\r\n                    ElMessage.info('自动保存成功');\r\n                });\r\n            }, 60000);\r\n        });\r\n    });\r\n}\r\nfunction exportPNG() {\r\n    mindMap.value.export('png', true, getTextFromHtml(mindMap.value.getData(true).root.data.text));\r\n}\r\n\r\nasync function createCloudFile() {\r\n    if (!settingsStore.settings.github.branch) return ElMessage.error('请先配置 Gitee 仓库信息');\r\n    const items = currentMenuPath.value?.split('/').filter((item) => item !== '') ?? [];\r\n    const fileName = ref(items.length > 2 ? items.slice(2).join('/') : '');\r\n    ElMessageBox({\r\n        title: '新建云端文件',\r\n        showCancelButton: true,\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        message: () =>\r\n            h('div', { style: { display: 'flex', flexDirection: 'row', alignItems: 'center' } }, [\r\n                h(ElInput, {\r\n                    modelValue: fileName.value,\r\n                    'onUpdate:modelValue': (val: string) => {\r\n                        fileName.value = val;\r\n                    },\r\n                    placeholder: '请输入文件名'\r\n                }),\r\n                h('span', { style: { marginLeft: '10px' } }, '.smm')\r\n            ])\r\n    })\r\n        .then(() => {\r\n            githubApi\r\n                .createFile(settingsStore.settings.github, `${fileName.value}.smm`, mindMap.value)\r\n                .then(() => {\r\n                    ElMessage.success('新建成功');\r\n                    searchItems('/cloud/branch').at(-1)!.meta!.load = false;\r\n                    onMenuOpenClose('/cloud/branch', true);\r\n                    // items[items.length - 1].children?.push(createCloudMenuItem(itm));\r\n                })\r\n                .catch((e) => ElMessage.error('新建失败:' + e));\r\n        })\r\n        .catch();\r\n}\r\nasync function saveCloudFile() {\r\n    if (!currentCloudFile.value) return ElMessage.error('请先打开云端文件');\r\n    const { sha, path } = currentCloudFile.value;\r\n    ElMessageBox.prompt('Please input your message', 'Submit', {\r\n        confirmButtonText: 'OK',\r\n        cancelButtonText: 'Cancel',\r\n        inputValue: 'update by mind map math online'\r\n    })\r\n        .then(({ value }) => {\r\n            githubApi\r\n                .updateFile(settingsStore.settings.github, path, sha, mindMap.value, value)\r\n                .then((res) => {\r\n                    currentCloudFile.value = { ...currentCloudFile.value, ...res };\r\n                    ElMessage.success('保存成功');\r\n                })\r\n                .catch((e) => ElMessage.error('保存失败:' + e));\r\n        })\r\n        .catch(() => {});\r\n}\r\nasync function deleteCloudFile(item: GithubListItem) {\r\n    const arr = item.path.split('/');\r\n    const path = `/cloud/branch/${arr.slice(0, arr.length - 1).join('/')}`;\r\n    const children = searchItems(path).at(-1)?.children ?? [];\r\n    const i = children.findIndex((_itm) => _itm.meta?.sha === item.sha);\r\n    if (i === undefined || i === -1) return ElMessage.error(`搜索路径失败：${path}`);\r\n    githubApi\r\n        .deleteFile(settingsStore.settings.github, item.path, item.sha)\r\n        .then(() => {\r\n            children?.splice(i, 1);\r\n            ElMessage.success('删除成功');\r\n        })\r\n        .catch((e) => ElMessage.error('删除失败:' + e));\r\n}\r\nfunction openCloudFile(item: GithubListItem) {\r\n    githubApi\r\n        .getContent(settingsStore.settings.github, item.path)\r\n        .then((res) =>\r\n            state.loadingWapper(store.loadData, JSON.parse(res)).then(() => {\r\n                currentCloudFile.value = item;\r\n                ElMessage.success('打开成功');\r\n            })\r\n        )\r\n        .catch((e) => {\r\n            ElMessage.error('打开失败:' + e);\r\n            currentCloudFile.value = null;\r\n        });\r\n}\r\nfunction searchItems(path: string) {\r\n    const arr = path.replace(/^\\//g, '').replace(/\\/$/g, '').split('/');\r\n    let items = menuItems.value;\r\n    const result = [] as MenuItem[];\r\n    while (arr.length > 0) {\r\n        const _itm = arr.shift();\r\n        const tmp = items.find((item) => item.id === _itm) ?? null;\r\n        if (tmp == null) {\r\n            ElMessage.error('未找到路径: ' + _itm);\r\n            throw new Error('未找到路径: ' + _itm);\r\n        }\r\n        result.push(tmp);\r\n        items = tmp.children ?? [];\r\n    }\r\n    return result;\r\n}\r\n\r\nasync function onMenuSelect(path: string) {\r\n    const itms = searchItems(path);\r\n    itms.at(-1)?.meta?.action?.(itms.at(-1)!, path);\r\n}\r\nfunction createCloudMenuItem(itm: GithubListItem) {\r\n    const res = {\r\n        id: itm.name,\r\n        icon: itm.type === 'dir' ? 'folder-line' : 'file-line',\r\n        title: itm.name,\r\n        meta: { ...itm, load: false }\r\n    } as MenuItem;\r\n    if (itm.type === 'dir') res.children = [];\r\n    else {\r\n        res.dbclick = () => state.loadingWapper(openCloudFile, itm);\r\n        res.render = () => (\r\n            <ElPopover width={'auto'} placement=\"right\" trigger=\"hover\">\r\n                {{\r\n                    reference: () => (\r\n                        <div style={currentCloudFile.value?.path === itm.path ? { color: 'coral', fontWeight: 'bold' } : { color: 'none', fontWeight: 'none' }}>\r\n                            <i class=\"ri-file-line\"></i>\r\n                            <span class=\"title\" style=\"margin-left: 0.5rem;\">\r\n                                {itm.name}\r\n                            </span>\r\n                        </div>\r\n                    ),\r\n                    default: () => (\r\n                        <div>\r\n                            <ElButton plain size=\"small\" type=\"success\" onClick={() => state.loadingWapper(openCloudFile, itm)}>\r\n                                打开\r\n                            </ElButton>\r\n                            <ElButton plain size=\"small\" type=\"warning\" onClick={() => state.loadingWapper(deleteCloudFile, itm)}>\r\n                                删除\r\n                            </ElButton>\r\n                        </div>\r\n                    )\r\n                }}\r\n            </ElPopover>\r\n        );\r\n    }\r\n    return res;\r\n}\r\nasync function onMenuOpenClose(path: string, isOpen: boolean) {\r\n    if (currentMenuPath.value) searchItems(currentMenuPath.value).forEach((item) => (item.style = { fontWeight: undefined }));\r\n    currentMenuPath.value = path;\r\n    if (!path.startsWith('/cloud')) return;\r\n    const itms = searchItems(path);\r\n    if (itms.length < 2) return;\r\n    if (itms[0].id === 'cloud' && itms.length > 1 && itms[1].id === 'branch') {\r\n        if (!settingsStore.settings.github.branch) return ElMessage.error('请先配置 Gitee 仓库信息');\r\n        const _itm = itms[itms.length - 1];\r\n        _itm.style = { fontWeight: 'bold' };\r\n        if (isOpen && !_itm.meta.load) {\r\n            loadingMenu.value = true;\r\n            const cloudPath = itms\r\n                .splice(2)\r\n                .map((item) => item.title)\r\n                .join('/');\r\n            const res = await githubApi.getList(settingsStore.settings.github, cloudPath).finally(() => (loadingMenu.value = false));\r\n            _itm.children = res.filter((itm) => itm.type === 'dir' || itm.name.endsWith('.smm')).map(createCloudMenuItem);\r\n            _itm.meta.load = true;\r\n        }\r\n    }\r\n}\r\nconst popover = ref<any>();\r\nfunction onMenuPopShow() {\r\n    console.log('onMenuPopShow', popover.value);\r\n}\r\nwatch(\r\n    () => settingsStore.settings.github,\r\n    (val) => {\r\n        githubOpt.value.data = { ...githubOpt.value.data, ...val };\r\n    }\r\n);\r\n</script>\r\n<template>\r\n    <div class=\"menu-toolbar\" @click.stop.passive=\"void 0\">\r\n        <el-menu\r\n            ref=\"menuRef\"\r\n            v-loading=\"loadingMenu\"\r\n            :collapse=\"isCollapse\"\r\n            @open=\"(idx:string) => onMenuOpenClose(idx, true)\"\r\n            @close=\"(idx:string) => onMenuOpenClose(idx, false)\"\r\n            @select=\"onMenuSelect\"\r\n        >\r\n            <DynamicMenu :menu-data=\"menuItems\" :id=\"''\" />\r\n        </el-menu>\r\n        <i class=\"collapse-icon\" :class=\"`ri-arrow-${isCollapse ? 'right' : 'left'}-double-line`\" @click.stop.passive=\"() => (isCollapse = !isCollapse)\"></i>\r\n    </div>\r\n    <el-dialog v-model=\"githubOpt.showDialog\" title=\"Gitee 同步\" width=\"600\">\r\n        <el-form>\r\n            <el-form-item label=\"用户授权码\" label-width=\"140px\" required>\r\n                <el-input v-model=\"githubOpt.data.access_token\" placeholder='进入\"设置\" > \"私人令牌\" > \"生成新令牌\" 获取' autocomplete=\"off\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"仓库所属空间地址\" label-width=\"140px\" required>\r\n                <el-input v-model=\"githubOpt.data.owner\" placeholder=\"企业、组织或个人的地址 path\" autocomplete=\"off\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"仓库名称\" label-width=\"140px\" required>\r\n                <el-input v-model=\"githubOpt.data.repo\" placeholder=\"默认为 master\" autocomplete=\"off\" />\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button type=\"primary\" @click.stop.passive=\"githubOpt.confirm\">确定</el-button>\r\n                <el-button type=\"warning\" @click.stop.passive=\"githubOpt.cancel\">取消</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n    </el-dialog>\r\n</template>\r\n\r\n<style lang=\"css\">\r\n:deep(.el-message-box__message) {\r\n    width: 100%;\r\n}\r\n</style>\r\n\r\n<style scoped lang=\"less\">\r\n.collapse-icon {\r\n    opacity: 0.5;\r\n}\r\n\r\n.menu-toolbar {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    position: absolute;\r\n    max-width: 200px;\r\n    top: 0;\r\n    left: 0;\r\n}\r\n</style>\r\n"],"names":["fontFamilyList","fontSizeList","colorList","fontFamilyListZh","fontFamilyListEn","useI18n","picker","ref","emit","__emit","color","_useModel","__props","sleep","ms","resolve","useMainStore","defineStore","_mindMap","mindMap","computed","setMindMap","mindMapIns","loadData","data","storeToRefs","locale","items","reactive","formatInfo","font","size","style","show","fontFamilyItems","onMounted","onRichTextSelectionChange","colorPickerCur","hasRange","rect","_formatInfo","colorPickerVis","onFormatChange","item","args","_a","store","t","nodeActive","curNode","contextmenuRef","menuLoc","svgOpt","imageDialogVisible","image","itemsOnNode","hide","exportPNG","expandList","res","i","itemsOnSvg","ElMessage","showNodeContextMenu","e","display","getShowPosition","x","y","nextTick","node","_node","downloadFile","getTextFromHtml","err","insertImage","handleSelectImage","uploadFile","uploadFiles","reader","getSettings","settings","saveSettings","settingsApi","fileHandle","readFileAsync","file","reject","create","_MindMap","saveData","fileContent","mandMap","writable","error","useSettingsStore","defaultGithubSettings","useStateStore","loading","loadingWapper","fn","promise","axiosIns","axios","response","utf8ToBase64","str","byte","base64ToUtf8","b64","c","_get_content","options","path","api_url","owner","access_token","repo","urlWithPath","getList","getContent","createFile","message","content","updateFile","sha","deleteFile","githubApi","state","settingsStore","githubOpt","showDialog","value","github","confirm","setGithub","cancel","isCollapse","menuRef","loadingMenu","currentMenuPath","currentCloudFile","cloudList","menuItems","id","title","icon","children","meta","action","then","open","createCloudFile","saveCloudFile","branch","load","autosaveInterval","clearInterval","setInterval","info","export","getData","root","text","split","filter","fileName","length","slice","join","ElMessageBox","showCancelButton","confirmButtonText","cancelButtonText","h","flexDirection","alignItems","ElInput","modelValue","val","placeholder","marginLeft","success","searchItems","at","onMenuOpenClose","catch","prompt","inputValue","deleteCloudFile","arr","findIndex","_itm","undefined","splice","openCloudFile","JSON","parse","replace","result","shift","tmp","find","Error","push","onMenuSelect","itms","createCloudMenuItem","itm","name","type","dbclick","render","_createVNode2","ElPopover","reference","fontWeight","default","ElButton","onClick","_createTextVNode2","isOpen","forEach","startsWith","cloudPath","map","finally","endsWith","watch"],"mappings":"iWACO,MAAMA,GAAiB,CAC5B,CACE,KAAM,KACN,MAAO,uBACR,EACD,CACE,KAAM,OACN,MAAO,uBACR,EACD,CACE,KAAM,KACN,MAAO,gCACR,EACD,CACE,KAAM,KACN,MAAO,sBACR,EACD,CACE,KAAM,KACN,MAAO,WACR,EACD,CACE,KAAM,cACN,MAAO,aACR,EACD,CACE,KAAM,QACN,MAAO,8BACR,EACD,CACE,KAAM,aACN,MAAO,0BACR,EACD,CACE,KAAM,gBACN,MAAO,eACR,EACD,CACE,KAAM,SACN,MAAO,iBACR,EACD,CACE,KAAM,kBACN,MAAO,iBACR,EACD,CACE,KAAM,aACN,MAAO,YACR,EACD,CACE,KAAM,QACN,MAAO,OACR,CACH,EAGaC,GAAe,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAE,EAM1CC,GAAY,CACvB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UAEA,aACF,EAqKc,UAAU,SAAS,YAAW,EAAG,QAAQ,KAAK,GAAK,ECzQ1D,MAAMF,GAAiB,CAC5B,CACE,KAAM,UACN,MAAO,uBACR,EACD,CACE,KAAM,kBACN,MAAO,uBACR,EACD,CACE,KAAM,UACN,MAAO,gCACR,EACD,CACE,KAAM,WACN,MAAO,sBACR,EACD,CACE,KAAM,kBACN,MAAO,WACR,EACD,CACE,KAAM,cACN,MAAO,aACR,EACD,CACE,KAAM,QACN,MAAO,8BACR,EACD,CACE,KAAM,aACN,MAAO,0BACR,EACD,CACE,KAAM,gBACN,MAAO,eACR,EACD,CACE,KAAM,SACN,MAAO,iBACR,EACD,CACE,KAAM,kBACN,MAAO,iBACR,EACD,CACE,KAAM,aACN,MAAO,YACR,EACD,CACE,KAAM,QACN,MAAO,OACR,CACH,EAkIc,UAAU,SAAS,YAAW,EAAG,QAAQ,KAAK,GAAK,EC/IjE,MAAMA,GAAiB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"}